# 对称性积分公式应用实例

## 例题：$\int_0^{\pi} \frac{x \sin x}{1+\cos^2 x} dx$

### 识别过程

**步骤1**：确认形式
- 积分区间：$[0, \pi]$ ✅
- 被积函数：$\frac{x \sin x}{1+\cos^2 x}$ 

**步骤2**：提取 $f(\sin x)$
$$\frac{x \sin x}{1+\cos^2 x} = x \cdot \frac{\sin x}{1+\cos^2 x}$$

所以：$f(\sin x) = \frac{\sin x}{1+\cos^2 x}$

**步骤3**：验证 $f$ 只依赖于 $\sin x$
$$f(\sin x) = \frac{\sin x}{1+\cos^2 x} = \frac{\sin x}{1+(1-\sin^2 x)} = \frac{\sin x}{2-\sin^2 x}$$

设 $u = \sin x$，则 $f(u) = \frac{u}{2-u^2}$ ✅

### 应用公式

$$\int_0^{\pi} \frac{x \sin x}{1+\cos^2 x} dx = \frac{\pi}{2} \int_0^{\pi} \frac{\sin x}{1+\cos^2 x} dx$$

### 计算右边积分

换元：$t = \cos x$，$dt = -\sin x \, dx$
- 当 $x: 0 \to \pi$ 时，$t: 1 \to -1$

$$\int_0^{\pi} \frac{\sin x}{1+\cos^2 x} dx = \int_1^{-1} \frac{-dt}{1+t^2} = \int_{-1}^1 \frac{dt}{1+t^2}$$

$$= [\arctan t]_{-1}^1 = \arctan 1 - \arctan(-1) = \frac{\pi}{4} - (-\frac{\pi}{4}) = \frac{\pi}{2}$$

### 最终结果

$$\int_0^{\pi} \frac{x \sin x}{1+\cos^2 x} dx = \frac{\pi}{2} \cdot \frac{\pi}{2} = \frac{\pi^2}{4}$$

## 关键技巧

### $f(\sin x)$ 识别方法
1. 提取 $x$ 因子
2. 剩余部分用 $\cos^2 x = 1 - \sin^2 x$ 转换
3. 确保只含 $\sin x$

### 常见转换
- $\cos^2 x = 1 - \sin^2 x$
- $\tan x = \frac{\sin x}{\cos x} = \frac{\sin x}{\sqrt{1-\sin^2 x}}$
- $\sec^2 x = 1 + \tan^2 x = \frac{1}{\cos^2 x} = \frac{1}{1-\sin^2 x}$

## 积分区间限制说明

### 为什么只能在 $[0,\pi]$ 使用？

**证明依赖**：
- $\sin(\pi - x) = \sin x$ （关键对称性）
- 换元 $t = \pi - x$ 保持区间不变

**其他区间不适用**：
- $[0, 2\pi]$：$\sin(2\pi - x) = -\sin x \neq \sin x$
- $[0, \frac{\pi}{2}]$：换元后区间变化，失去对称性

### 推广形式
类似公式存在于其他对称区间：
- $\int_{-a}^a xf(x^2) dx = 0$ （奇函数性质）
- $\int_0^a f(x) dx = \int_0^a f(a-x) dx$ （一般对称性）

---

**标签**: #对称性积分 #应用实例 #三角函数积分
**难度**: ⭐⭐⭐⭐
